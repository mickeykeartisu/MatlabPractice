kakasiのインストール
--------------------

kakasi-2.3.4.zip を解凍し、中のkakasiフォルダを c:\ の下にコピーする。
このフォルダ構成でないと正しく動作しない（設定すればなんとかなるが、省略）。
正しくコピーされていれば、c:\kakasi\bin\kakasi.exe が存在するはず。


回答ファイルの作成
------------------

エクセルでカタカナで入力し、Paramfileと同じフォルダにCSVファイルとして保存する。
exerciseの分は入力しない。
なお、4モーラになっていない場合は処理できないため、空欄として
入力する。ファイル名は、以下で設定できるが、末尾を「_words.csv」と
するのが良い。

例: Test_answer3_words.csv

次に、このファイルをkakasiを用いて音素に変換する。変換後のファイル名は、
末尾を「_words.txt」とすること。

例: Test_answer3_words.csvを入力としてTest_answer3_words.txtを出力する場合

c:\kakasi\bin\kakasi.exe -Ha -Ka -Ja -ka < Test_answer3_words.csv > Test_answer3_words.txt


設定
----

まず、以下の変数を自分のマシンに合わせて編集。
すべてのフォルダは存在している必要がある。

  workdir : 入出力ファイルがあるフォルダの上位フォルダ
  idir : workdirの下の入力ファイルがあるフォルダ
  odir : workdirの下の出力ファイルを保存するフォルダ
  param_file : Paramfileの名前。例えば'Paramfile.txt'
  list_file : Listファイルの名前
  master_file : Masterファイルの名前

次に、user_listを編集する。

user_list = strvcat(user_list, 'Test_answer3');

などとなっている箇所において、必要な数だけファイルを追加。拡張子は付けない。

また、Paramfileがあるフォルダに、正解ファイル'correct_master.txt'が必要。


実行
----

% mkconfusion_kohara


ファイル名について
------------------

<被験者名><モーラID>_confusion_<方式名>.csv : 個人の結果
<被験者名><モーラID>_confusion_<方式名>_normalized.csv : 個人の結果（割合に換算）
<被験者群名><モーラID>_confusion_<方式名>_mean.csv : 被験者群における平均
<被験者群名><モーラID>_confusion_<方式名>_mean_normalized.csv : 被験者群における平均（割合に換算）
<被験者群名><モーラID>_confusion_<方式名>_std.csv : 被験者群における標準偏差
<被験者群名>_correct<モーラID>.csv：被験者群における正解数
<被験者群名>_%correct<モーラID>.csv：被験者群における正解率

<被験者群名>:
 all: 全員

<モーラID>:
"": 全モーラ平均
_mora1: 第1モーラのみ
_mora2: 第2モーラのみ
_mora3: 第3モーラのみ
_mora4: 第4モーラのみ

<方式名>:


コンフュージョンマトリックスについて
------------------------------------

* 行: 呈示音声の音素
* 列: 回答した音素。「Null」は、「回答なし」の場合の数。
* 右端の列: 総和


音声表記について
----------------

* 「m」から 「.」までで特殊なもの
 S: し、しゃ、しゅ、しょ
 tS: ち、ちゃ、ちゅ、ちょ
 d3:  じ、じゃ、じゅ、じょ
 hj: ひ、ひゃ、ひゅ、ひょ
 f: ふ
 j: や、ゆ、よ
 N: ん
 . : 子音なし（あ、い、う、え、お）

* 「a」, 「i」, 「u」,「e」, 「o」 以降
 a/i/u/e/o : 母音部分にあ、い、う、え、おを含む
  （スペース）: 母音なし（ん）

本来、「m」から「.」までと、「a」から「 （スペース）」までの部分はそれぞれ
別のファイルにすべきであるが、ファイル数が膨大になって見るのが大変なため、
今回は同一にしている。

また、促音は今回の評価では無視している。
